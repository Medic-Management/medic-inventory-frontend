@if (isOpen) {
  <div class="modal-overlay" (click)="onClose()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <div class="icon-circle">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
            <path d="M12 15V3M12 15L8 11M12 15L16 11M2 17L2 19C2 20.1046 2.89543 21 4 21L20 21C21.1046 21 22 20.1046 22 19L22 17" stroke="#3b82f6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
        <h2>Descargar</h2>
      </div>

      <p class="modal-description">Selecciona el formato de descarga</p>

      <div class="format-options">
        <button class="format-btn" (click)="onDownload('excel')">
          <svg width="40" height="40" viewBox="0 0 24 24" fill="none">
            <rect x="3" y="3" width="18" height="18" rx="2" stroke="#10b981" stroke-width="2"/>
            <path d="M7 7h10M7 12h10M7 17h7" stroke="#10b981" stroke-width="2" stroke-linecap="round"/>
          </svg>
          <span>Excel (.xlsx)</span>
        </button>

        <button class="format-btn" (click)="onDownload('pdf')">
          <svg width="40" height="40" viewBox="0 0 24 24" fill="none">
            <path d="M7 3V21M17 3V21M3 7H21M3 17H21M3 3H21V21H3V3Z" stroke="#ef4444" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <span>PDF (.pdf)</span>
        </button>
      </div>

      @if (downloadSuccess) {
        <div class="success-message">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
            <circle cx="10" cy="10" r="9" stroke="#10b981" stroke-width="2"/>
            <path d="M6 10L9 13L14 7" stroke="#10b981" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <span>Â¡Descarga exitosa!</span>
        </div>
      }
    </div>
  </div>
}
